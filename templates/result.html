<!DOCTYPE html>
<html>
<head>
    <title>Result Page</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="centered">
        <h1>Uploaded Videos</h1>
        <ul>
            {% for video in uploaded_videos %}
                <video width="500" height="240" controls preload="none">
                    <source src="{{ url_for('static', filename='video_output/' + video) }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            {% endfor %}
        </ul>
    </div>

    <div class="action-videos">
        <div class="action-category">
            <h1>Arm Crossed Videos</h1>
            <ul class="video-list">
                <div class="video-info">
                    <div class="video-thumbnail">
                        <img src="{{ url_for('static', filename='images/arm_crossed_icon.jpg') }}" alt="Arm Crossed Icon">
                    </div>
                    <div class="video-count">
                        Total: {{ arm_crossed_videos|length }} videos
                    </div>
                </div>
                {% for video in arm_crossed_videos %}
                    <li>
                        <div class="video-details">
                            <a href="javascript:void(0);" class="popup-link" data-video-src="{{ url_for('static', filename='arm_crossed_folder/' + video) }}">{{ video }}</a>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div>
        
        <div class="action-category">
            <h1>Head Scratching Videos</h1>
            <ul class="video-list">
                <div class="video-info">
                    <div class="video-thumbnail">
                        <img src="{{ url_for('static', filename='images/head_scratching_icon.jpg') }}" alt="Head Scratching Icon">
                    </div>
                    <div class="video-count">
                        Total: {{ head_scratching_videos|length }} videos
                    </div>
                </div>
                {% for video in head_scratching_videos %}
                    <li>
                        <div class="video-details">
                            <a href="javascript:void(0);" class="popup-link" data-video-src="{{ url_for('static', filename='head_scratching_folder/' + video) }}">{{ video }}</a>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="back-button">
        <a href="/">戻る</a>
    </div>

    <!-- ポップアップ用のコンテンツ -->
    <div class="popup" id="popup-container">
        <div class="popup-content">
            <span class="popup-close" id="popup-close">&times;</span>
            <video class="popup-video" id="popup-video" controls></video>
        </div>
    </div>

    <script>
        // ポップアップを開く処理
        const popupLinks = document.querySelectorAll('.popup-link');
        const popupContainer = document.getElementById('popup-container');
        const popupVideo = document.getElementById('popup-video');
        const popupClose = document.getElementById('popup-close');

        popupLinks.forEach(link => {
            link.addEventListener('click', () => {
                const videoSrc = link.getAttribute('data-video-src');
                popupVideo.src = videoSrc;
                popupContainer.style.display = 'block';
            });
        });

        // ポップアップを閉じる処理
        popupClose.addEventListener('click', () => {
            popupVideo.src = '';
            popupContainer.style.display = 'none';
        });
    </script>
</body>
</html>
